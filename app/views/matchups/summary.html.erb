<!-- Page Container with Dark Mode Support -->
<div class="min-h-screen transition-colors duration-200" x-data="{ darkMode: $parent.darkMode }">

  <!-- Page Title -->
  <div class="text-center mb-12 pt-8">
    <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">Week 1 Matchups Summary</h2>
    <p class="text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
      Season <%= @year %> - Comprehensive matchup analysis for passing, rushing, and field goal performance
    </p>
  </div>


  <!-- Rushing Offense vs Defense Table -->
  <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-200 dark:border-gray-700">
    <div class="bg-gradient-to-r from-indigo-500 to-indigo-600 px-6 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <span class="text-2xl">ğŸƒ</span>
          <div>
            <h3 class="text-xl font-bold text-white">Rushing Matchups</h3>
          </div>
        </div>
        
        <!-- Rushing Sorting Buttons -->
        <div class="flex flex-wrap gap-2">
          <a href="<%= matchups_summary_path(@year, passing_sort: @passing_sort, rushing_sort: 'rushing_yards') %>" 
             class="px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 <%= @rushing_sort == 'rushing_yards' ? 'bg-white text-indigo-600 shadow-lg scale-105' : 'bg-indigo-700 text-white hover:bg-indigo-600 hover:scale-102' %>">
            ğŸ“ Rush Yds
          </a>
          <a href="<%= matchups_summary_path(@year, passing_sort: @passing_sort, rushing_sort: 'carry_attempts') %>" 
             class="px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 <%= @rushing_sort == 'carry_attempts' ? 'bg-white text-indigo-600 shadow-lg scale-105' : 'bg-indigo-700 text-white hover:bg-indigo-600 hover:scale-102' %>">
            ğŸ¯ Attempts
          </a>
          <a href="<%= matchups_summary_path(@year, passing_sort: @passing_sort, rushing_sort: 'yards_per_carry') %>" 
             class="px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 <%= @rushing_sort == 'yards_per_carry' ? 'bg-white text-indigo-600 shadow-lg scale-105' : 'bg-indigo-700 text-white hover:bg-indigo-600 hover:scale-102' %>">
            ğŸ“Š Yds/Carry
          </a>
        </div>
      </div>
    </div>

    <div class="text-xs font-mono text-gray-400 px-6 py-2">
      <% if @rushing_sort != 'rushing_attack_rank' %>
        <div class="mt-1 text-indigo-300">
          Current sort: <%= @rushing_sort.gsub('_', ' ').titleize %> (descending)
        </div>
      <% end %>
    </div>
    
    <div class="p-6">
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="bg-gray-50 dark:bg-gray-700">
              <th class="p-1 font-semibold text-gray-900 dark:text-white">#</th>
              <th class="p-3 font-semibold text-gray-900 dark:text-white text-left">Offense</th>
              <th class="p-3 font-semibold text-gray-900 dark:text-white text-left">Defense</th>
              <th class="p-3 font-semibold text-gray-900 dark:text-white">Rush Yds</th>
              <th class="p-3 font-semibold text-gray-900 dark:text-white">Yds/Carry</th>
              <th class="p-3 font-semibold text-gray-900 dark:text-white">Rush Att</th>
              <th class="p-3 font-semibold text-gray-900 dark:text-white">Points</th>
            </tr>
          </thead>
          <tbody>
            <% @rushing_matchups_with_colors.each_with_index do |item, index| %>
              <% matchup = item[:matchup] %>
              <% bg_color = item[:background_color] %>
              <tr class="text-center border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
                <td class="py-1 px-1 font-semibold text-lg text-white text-center <%= bg_color %> rounded"><%= index + 1 %></td>
                <td class="py-3 px-3">
                  <div class="flex items-center space-x-2">
                    <span class="text-2xl"><%= matchup.team&.emoji %></span>
                    <a href="/teams/<%= matchup.team&.slug %>" target="_blank" class="hover:text-blue-300 transition-colors">
                      <div class="text-sm text-gray-600 dark:text-gray-300">
                        <span class="block lg:inline"><%= matchup.team&.location %></span>
                        <span class="font-bold text-lg text-gray-900 dark:text-white block lg:inline"><%= matchup.team&.alias %></span>
                      </div>
                    </a>
                    <% if matchup.home %>
                      <span class="text-sm">ğŸ </span>
                    <% end %>
                  </div>
                  <div class="flex items-center space-x-2 mt-1 text-xs text-gray-600 dark:text-gray-300">
                    <span>ğŸ§  <%= matchup.offensive_play_caller_rank %></span>
                    <span>ğŸƒ <%= matchup.rushing_rank %></span>
                    <span>ğŸ›¡ï¸ <%= matchup.pass_block_rank %></span>
                    <span>â±ï¸ <%= matchup.pace_of_play_rank %></span>
                    <span>ğŸ‘Ÿ <%= matchup.run_heavy_rank %></span>
                  </div>
                </td>
                <td class="py-3 px-3">
                  <div class="flex items-center space-x-2">
                    <span class="text-2xl"><%= matchup.team_defense&.emoji %></span>
                    <a href="/teams/<%= matchup.team_defense&.slug %>" target="_blank" class="hover:text-blue-300 transition-colors">
                      <div class="text-sm text-gray-600 dark:text-gray-300">
                        <span class="block lg:inline"><%= matchup.team_defense&.location %></span>
                        <span class="font-bold text-lg text-gray-900 dark:text-white block lg:inline"><%= matchup.team_defense&.alias %></span>
                      </div>
                    </a>
                    <% if !matchup.home %>
                      <span class="text-sm">ğŸ </span>
                    <% end %>
                  </div>
                  <div class="flex items-center space-x-2 mt-1 text-xs text-gray-600 dark:text-gray-300">
                    <span>ğŸ›‘ <%= matchup.run_defense_rank %></span>
                  </div>
                </td>
                <td class="py-3 px-3">
                <div class="font-mono text-md text-green-600">
                  <%= number_with_precision(matchup.prediction_rushing_yards, precision: 0) %>
                </div>
              </td>
              <td class="py-3 px-3">
              <div class="font-mono text-md text-green-600">
                <%= number_with_precision(matchup.prediction_yards_per_carry, precision: 2) %>
              </div>
            </td>
              <td class="py-3 px-3">
                <div class="font-mono text-md text-green-600">
                  <%= number_with_precision(matchup.prediction_carry_attempts, precision: 0) %>
                </div>
              </td>
                <td class="py-3 px-3">
                  <div class="font-mono font-bold text-lg text-green-600">
                    <%= number_with_precision(matchup.rushing_td_points, precision: 0) %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>



    <!-- Passing Offense vs Defense Table -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-200 dark:border-gray-700 mb-12">
      <div class="bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">ğŸ–ï¸</span>
            <div>
              <h3 class="text-xl font-bold text-white">Passing Matchups</h3>
            </div>
          </div>
          
          <!-- Sorting Buttons -->
          <div class="flex flex-wrap gap-2">
            <a href="<%= matchups_summary_path(@year, passing_sort: 'passing_yards', rushing_sort: @rushing_sort) %>" 
               class="px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 <%= @passing_sort == 'passing_yards' ? 'bg-white text-purple-600 shadow-lg scale-105' : 'bg-purple-700 text-white hover:bg-purple-600 hover:scale-102' %>">
              ğŸ“ Pass Yds
            </a>
            <a href="<%= matchups_summary_path(@year, passing_sort: 'pocket_time', rushing_sort: @rushing_sort) %>" 
               class="px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 <%= @passing_sort == 'pocket_time' ? 'bg-white text-purple-600 shadow-lg scale-105' : 'bg-purple-700 text-white hover:bg-purple-600 hover:scale-102' %>">
              â±ï¸ Pocket
            </a>
            <a href="<%= matchups_summary_path(@year, passing_sort: 'yards_per_attempt', rushing_sort: @rushing_sort) %>" 
               class="px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 <%= @passing_sort == 'yards_per_attempt' ? 'bg-white text-purple-600 shadow-lg scale-105' : 'bg-purple-700 text-white hover:bg-purple-600 hover:scale-102' %>">
              ğŸ“Š Yds/Att
            </a>
          </div>
        </div>
      </div>

      <div class="text-xs font-mono text-gray-400 px-6 py-2">
        <% if @passing_sort != 'passing_attack_rank' %>
          <div class="mt-1 text-purple-300">
            Current sort: <%= @passing_sort.gsub('_', ' ').titleize %> (descending)
          </div>
        <% end %>
      </div>
      
      <div class="p-6">
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="bg-gray-50 dark:bg-gray-700">
                <th class="p-1 font-semibold text-gray-900 dark:text-white text-center">#</th>
                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white">Offense</th>
                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white">Defense</th>

                <th class="p-3 font-semibold text-gray-900 dark:text-white">
                  Pass Yds
                  <% if @passing_sort == 'passing_yards' %>
                    <span class="text-purple-300">â†“</span>
                  <% end %>
                </th>
                <th class="p-3 font-semibold text-gray-900 dark:text-white">
                  Pocket
                  <% if @passing_sort == 'pocket_time' %>
                    <span class="text-purple-300">â†“</span>
                  <% end %>
                </th>
                <th class="p-3 font-semibold text-gray-900 dark:text-white">
                Yds/Att
                <% if @passing_sort == 'yards_per_attempt' %>
                  <span class="text-purple-300">â†“</span>
                <% end %>
                </th>
                <th class="p-3 font-semibold text-gray-900 dark:text-white">
                  Att
                  <% if @passing_sort == 'passing_attempts' %>
                    <span class="text-purple-300">â†“</span>
                  <% end %>
                </th>

                <th class="p-3 font-semibold text-gray-900 dark:text-white">
                  Score
                  <% if @passing_sort == 'passing_attack_rank' %>
                    <span class="text-purple-300">â†‘</span>
                  <% end %>
                </th>
                <th class="p-3 font-semibold text-gray-900 dark:text-white">Points</th>
              </tr>
            </thead>
            <tbody>
              <% @passing_matchups_with_colors.each_with_index do |item, index| %>
                <% matchup = item[:matchup] %>
                <% bg_color = item[:background_color] %>
                <tr class="text-center border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
                  <td class="py-1 px-1 font-semibold text-lg text-white text-center <%= bg_color %> rounded"><%= index + 1 %></td>
                  <td class="py-3 px-3">
                    <div class="flex items-center space-x-2">
                      <span class="text-2xl"><%= matchup.team&.emoji %></span>
                      <a href="/teams/<%= matchup.team&.slug %>" target="_blank" class="hover:text-blue-300 transition-colors">
                        <div class="text-sm text-gray-600 dark:text-gray-200">
                          <span class="block lg:inline"><%= matchup.team&.location %></span>
                          <span class="font-bold text-lg text-gray-900 dark:text-white block lg:inline"><%= matchup.team&.alias %></span>
                        </div>
                      </a>
                      <% if matchup.home %>
                        <span class="text-sm">ğŸ </span>
                      <% end %>
                    </div>
                    <div class="flex items-center space-x-2 mt-1 text-xs text-gray-600 dark:text-gray-200">
                      <span>ğŸ§  <%= matchup.offensive_play_caller_rank %></span>
                      <span>ğŸˆ <%= matchup.qb_passing_rank %></span>
                      <span>ğŸ¤² <%= matchup.receiver_core_rank %></span>
                      <span>ğŸ›¡ï¸ <%= matchup.pass_block_rank %></span>
                      <span>â±ï¸ <%= matchup.pace_of_play_rank %></span>
                      <span>ğŸ‘Ÿ <%= matchup.run_heavy_rank %></span>
                    </div>
                  </td>
                  <td class="py-3 px-3">
                    <div class="flex items-center space-x-2">
                      <span class="text-2xl"><%= matchup.team_defense&.emoji %></span>
                      <a href="/teams/<%= matchup.team_defense&.slug %>" target="_blank" class="hover:text-blue-300 transition-colors">
                        <div class="text-sm text-gray-600 dark:text-gray-200">
                          <span class="block lg:inline"><%= matchup.team_defense&.location %></span>
                          <span class="font-bold text-lg text-gray-900 dark:text-white block lg:inline"><%= matchup.team_defense&.alias %></span>
                        </div>
                      </a>
                      <% if !matchup.home %>
                        <span class="text-sm">ğŸ </span>
                      <% end %>
                    </div>
                    <div class="flex items-center space-x-2 mt-1 text-xs text-gray-600 dark:text-gray-200">
                      <span>âš¡ <%= matchup.pass_rush_rank %></span>
                      <span>ğŸ‘ï¸ <%= matchup.coverage_rank %></span>
                    </div>
                  </td>
                  <td class="py-3 px-3">
                  <div class="font-mono text-md text-blue-600">
                    <%= number_with_precision(matchup.prediction_passing_yards, precision: 0) %>
                  </div>
                </td>
                  <td class="py-3 px-3">
                    <div class="font-mono text-md text-blue-600">
                      <%= number_with_precision(matchup.prediction_seconds_until_pressure, precision: 2) %>
                    </div>
                  </td>
                  <td class="py-3 px-3">
                  <div class="font-mono text-md text-blue-600">
                    <%= number_with_precision(matchup.prediction_yards_per_attempt, precision: 1) %>
                  </div>
                </td>
                  <td class="py-3 px-3">
                    <div class="font-mono text-md text-blue-600">
                      <%= number_with_precision(matchup.prediction_passing_attempts, precision: 0) %>
                    </div>
                  </td>
                  <td class="py-3 px-3">
                  <div class="font-mono text-md text-blue-600">
                    <%= number_with_precision(matchup.passing_attack_score, precision: 0) %>
                  </div>
                </td>
                <td class="py-3 px-3">
                  <div class="font-mono font-bold text-lg text-blue-600">
                    <%= number_with_precision(matchup.passing_td_points, precision: 0) %>
                  </div>
                </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Field Goal Table -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-200 dark:border-gray-700">
      <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 px-6 py-4">
        <div class="flex items-center space-x-3">
          <span class="text-2xl">ğŸ¥…</span>
          <div>
            <h3 class="text-xl font-bold text-white">Field Goal Rankings</h3>
            <p class="text-yellow-100 text-sm">Shows field goal points based on offensive and defensive performance</p>
          </div>
        </div>
      </div>

      <div class="text-xs font-mono text-gray-400">
        <div>Field Goal Points: Based on offensive efficiency and defensive pressure</div>
      </div>
      
      <div class="p-6">
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="bg-gray-50 dark:bg-gray-700">
                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white">Rank</th>
                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white">Offense</th>
                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white">Defense</th>
                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white">Offense Score</th>
                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white">Field Goal Points</th>
              </tr>
            </thead>
            <tbody>
              <% @field_goal_matchups_with_colors.each_with_index do |item, index| %>
                <% matchup = item[:matchup] %>
                <% bg_color = item[:background_color] %>
                <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
                  <td class="py-3 px-3 font-semibold text-lg text-white text-center <%= bg_color %> rounded"><%= index + 1 %></td>
                  <td class="py-3 px-3">
                    <div class="flex items-center space-x-2">
                      <span class="text-2xl"><%= matchup.team&.emoji %></span>
                      <a href="/teams/<%= matchup.team&.slug %>" target="_blank" class="hover:text-blue-300 transition-colors">
                        <div class="text-sm text-gray-600 dark:text-gray-300">
                          <span class="block lg:inline"><%= matchup.team&.location %></span>
                          <span class="font-bold text-lg text-gray-900 dark:text-white block lg:inline"><%= matchup.team&.alias %></span>
                        </div>
                      </a>
                      <% if matchup.home %>
                        <span class="text-sm">ğŸ </span>
                      <% end %>
                    </div>
                    <div class="flex items-center space-x-2 mt-1 text-xs text-gray-600 dark:text-gray-300">
                      <span>ğŸ§  <%= matchup.offensive_play_caller_rank %></span>
                      <span>ğŸƒ <%= matchup.rushing_rank %></span>
                      <span>ğŸ›¡ï¸ <%= matchup.pass_block_rank %></span>
                      <span>â±ï¸ <%= matchup.pace_of_play_rank %></span>
                      <span>ğŸ‘Ÿ <%= matchup.run_heavy_rank %></span>
                    </div>
                  </td>
                  <td class="py-3 px-3">
                    <div class="flex items-center space-x-2">
                      <span class="text-2xl"><%= matchup.team_defense&.emoji %></span>
                      <a href="/teams/<%= matchup.team_defense&.slug %>" target="_blank" class="hover:text-blue-300 transition-colors">
                        <div class="text-sm text-gray-600 dark:text-gray-300">
                          <span class="block lg-visible"><%= matchup.team_defense&.location %></span>
                          <span class="font-bold text-lg text-gray-900 dark:text-white block lg:inline"><%= matchup.team_defense&.alias %></span>
                        </div>
                      </a>
                      <% if !matchup.home %>
                        <span class="text-sm">ğŸ </span>
                      <% end %>
                    </div>
                    <div class="flex items-center space-x-2 mt-1 text-xs text-gray-600 dark:text-gray-300">
                      <span>ğŸ›‘ <%= matchup.run_defense_rank %></span>
                      <span>âš¡ <%= matchup.pass_rush_rank %></span>
                      <span>ğŸ‘ï¸ <%= matchup.coverage_rank %></span>
                    </div>
                  </td>
                  <td class="py-3 px-3">
                    <div class="font-mono font-bold text-lg text-yellow-600">
                      <%= number_with_precision(matchup.field_goal_score, precision: 1) %>
                    </div>
                  </td>
                  <td class="py-3 px-3">
                    <div class="font-mono font-bold text-lg text-yellow-600">
                      <%= number_with_precision(matchup.field_goal_points, precision: 0) %>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-16 text-center">
      <div class="text-sm text-gray-400 dark:text-gray-500">
        <p>Data updated for Week 1 of the <%= @year %> NFL season</p>
        <p class="mt-2">
          <a href="<%= matchups_week1_path(@year) %>" class="text-blue-400 hover:text-blue-300 underline">
            View Matchups
          </a>
          <span class="mx-2">â€¢</span>
          <a href="<%= teams_rankings_path(@year) %>" class="text-blue-400 hover:text-blue-300 underline">
            View Detailed Rankings
          </a>
          <span class="mx-2">â€¢</span>
          <a href="<%= teams_seasons_path(@year) %>" class="text-blue-400 hover:text-blue-300 underline">
            View Team Rosters
          </a>
        </p>
      </div>
    </footer> 